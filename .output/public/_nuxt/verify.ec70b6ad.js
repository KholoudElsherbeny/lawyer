import{F as H}from"./vee-validate.esm.a5d21a4f.js";import{_ as M,a as U}from"./success.b6063343.js";import{u as W,c as q,d as z,a as G,b as J}from"./entry.7aaca005.js";import{A as P,a as y,w as A,E as Q,J as g,K as C,O as R,ae as Y,L as s,Q as V,S as B,M as Z,G as X,W as x,R as j,u as p,r as ee,U as v,H as T,Z as E,b as ne,a5 as te,ad as ae,V as se}from"./swiper-vue.6e12f478.js";import{u as k}from"./cookie.4132d486.js";import{u as oe}from"./composables.61e7926a.js";const le=""+new URL("icon_edit.d79809a9.svg",import.meta.url).href;var L=P({name:"SingleOtpInput",props:{inputType:{type:String,validator:e=>["number","tel","letter-numeric","password"].includes(e),default:"tel"},inputmode:{type:String,default:"numeric"},value:{type:[String,Number]},separator:{type:String},focus:{type:Boolean},inputClasses:{type:[String,Array]},conditionalClass:{type:String},shouldAutoFocus:{type:Boolean},isLastChild:{type:Boolean},placeholder:{type:String},isDisabled:{type:Boolean}},emits:["on-change","on-keydown","on-paste","on-focus","on-blur"],setup(e,l){let{emit:u}=l;const o=y(e.value||""),t=y(null),h=()=>(o.value=o.value.toString(),o.value.length>1&&(o.value=o.value.slice(0,1)),u("on-change",o.value)),f=a=>a>=65&&a<=90,c=a=>a>=48&&a<=57||a>=96&&a<=105,d=a=>{e.isDisabled&&a.preventDefault();const m=a||window.event,I=m.which?m.which:m.keyCode;c(I)||e.inputType==="letter-numeric"&&f(I)||[8,9,13,37,39,46,86].includes(I)?u("on-keydown",a):m.preventDefault()},i=a=>u("on-paste",a),O=()=>(t.value.select(),u("on-focus")),b=()=>u("on-blur");return A(()=>e.value,(a,m)=>{a!==m&&(o.value=a)}),A(()=>e.focus,(a,m)=>{m!==a&&t.value&&e.focus&&(t.value.focus(),t.value.select())}),Q(()=>{t.value&&e.focus&&e.shouldAutoFocus&&(t.value.focus(),t.value.select())}),{handleOnChange:h,handleOnKeyDown:d,handleOnPaste:i,handleOnFocus:O,handleOnBlur:b,input:t,model:o,inputTypeValue:e.inputType==="letter-numeric"?"text":e.inputType}}});const ue={style:{display:"flex","align-items":"center"}},ie=["type","inputmode","placeholder","disabled"],re={key:0},de=["innerHTML"];function ce(e,l,u,o,t,h){return g(),C("div",ue,[R(s("input",{"data-test":"single-input",type:e.inputTypeValue,inputmode:e.inputmode,placeholder:e.placeholder,disabled:e.isDisabled,ref:"input",min:"0",max:"9",maxlength:"1",pattern:"[0-9]","onUpdate:modelValue":l[0]||(l[0]=f=>e.model=f),class:V([e.inputClasses,e.conditionalClass,{"is-complete":e.model}]),onInput:l[1]||(l[1]=function(){return e.handleOnChange&&e.handleOnChange(...arguments)}),onKeydown:l[2]||(l[2]=function(){return e.handleOnKeyDown&&e.handleOnKeyDown(...arguments)}),onPaste:l[3]||(l[3]=function(){return e.handleOnPaste&&e.handleOnPaste(...arguments)}),onFocus:l[4]||(l[4]=function(){return e.handleOnFocus&&e.handleOnFocus(...arguments)}),onBlur:l[5]||(l[5]=function(){return e.handleOnBlur&&e.handleOnBlur(...arguments)})},null,42,ie),[[Y,e.model]]),!e.isLastChild&&e.separator?(g(),C("span",re,[s("span",{innerHTML:e.separator},null,8,de)])):B("",!0)])}L.render=ce;const pe=8,me=37,he=39,fe=46;var K=P({name:"Vue3OtpInput",components:{SingleOtpInput:L},props:{value:{type:String,default:"",required:!0},numInputs:{default:4},separator:{type:String,default:"**"},inputClasses:{type:[String,Array]},conditionalClass:{type:Array,default:[]},inputType:{type:String,validator:e=>["number","tel","letter-numeric","password"].includes(e)},inputmode:{type:String,validator:e=>["numeric","text","tel","none"].includes(e),default:"numeric"},shouldAutoFocus:{type:Boolean,default:!1},placeholder:{type:Array,default:[]},isDisabled:{type:Boolean,default:!1}},setup(e,l){let{emit:u}=l;const o=y(0),t=y([]),h=y([]);A(()=>e.value,n=>{const r=p(n).split("");t.value=r},{immediate:!0});const f=n=>{o.value=n},c=()=>{o.value=-1},d=()=>t.value.join("").length===e.numInputs?(u("update:value",t.value.join("")),u("on-complete",t.value.join(""))):"Wait until the user enters the required number of characters",i=n=>{o.value=Math.max(Math.min(e.numInputs-1,n),0)},O=()=>{i(o.value+1)},b=()=>{i(o.value-1)},a=n=>{h.value=Object.assign([],t.value),t.value[o.value]=n,h.value.join("")!==t.value.join("")&&(u("update:value",t.value.join("")),u("on-change",t.value.join("")),d())};return{activeInput:o,otp:t,oldOtp:h,clearInput:()=>{t.value.length>0&&(u("update:value",""),u("on-change","")),t.value=[],o.value=0},handleOnPaste:n=>{n.preventDefault();const r=n.clipboardData.getData("text/plain").slice(0,e.numInputs-o.value).split("");if(e.inputType==="number"&&!r.join("").match(/^\d+$/)||e.inputType==="letter-numeric"&&!r.join("").match(/^\w+$/))return"Invalid pasted data";const S=t.value.slice(0,o.value).concat(r);return S.slice(0,e.numInputs).forEach(function($,N){t.value[N]=$}),i(S.slice(0,e.numInputs).length),d()},handleOnKeyDown:n=>{switch(n.keyCode){case pe:n.preventDefault(),a(""),b();break;case fe:n.preventDefault(),a("");break;case me:n.preventDefault(),b();break;case he:n.preventDefault(),O();break}},handleOnBlur:c,changeCodeAtFocus:a,focusInput:i,focusNextInput:O,focusPrevInput:b,handleOnFocus:f,checkFilledAllInputs:d,handleOnChange:n=>{a(n),O()},fillInput:n=>{const r=n.split("");r.length===e.numInputs&&(t.value=r,u("update:value",t.value.join("")),u("on-complete",t.value.join("")))}}}});const ve={style:{display:"flex"}},ye={key:0,autocomplete:"off",name:"hidden",type:"text",style:{display:"none"}};function ge(e,l,u,o,t,h){const f=Z("SingleOtpInput");return g(),C("div",ve,[e.inputType==="password"?(g(),C("input",ye)):B("",!0),(g(!0),C(X,null,x(e.numInputs,(c,d)=>(g(),j(f,{key:d,focus:e.activeInput===d,value:e.otp[d],separator:e.separator,"input-type":e.inputType,inputmode:e.inputmode,"input-classes":e.inputClasses,conditionalClass:e.conditionalClass[d],"is-last-child":d===e.numInputs-1,"should-auto-focus":e.shouldAutoFocus,placeholder:e.placeholder[d],"is-disabled":e.isDisabled,onOnChange:e.handleOnChange,onOnKeydown:e.handleOnKeyDown,onOnPaste:e.handleOnPaste,onOnFocus:i=>e.handleOnFocus(d),onOnBlur:e.handleOnBlur},null,8,["focus","value","separator","input-type","inputmode","input-classes","conditionalClass","is-last-child","should-auto-focus","placeholder","is-disabled","onOnChange","onOnKeydown","onOnPaste","onOnFocus","onOnBlur"]))),128))])}K.render=ge;var Oe=(()=>{const e=K;return e.install=l=>{l.component("Vue3OtpInput",e)},e})();const be={class:"auth_login"},we={class:"mb-3"},Ce={class:"text-5xl capitalize font-bold leading-9 block"},Ie={class:"max-w-[60%] inline-block mt-3 mb-4"},De={class:"text-base text-text-dark me-1"},Se={key:0,class:"font-bold text-secondary"},_e={class:"flex items-center font-medium text-primary mb-8"},$e=s("img",{src:le,alt:"edit icon",class:"me-2"},null,-1),Te={class:"register_form"},ke=s("p",{class:"text-red-500 text-sm mb-0"},null,-1),Ae=["disabled"],Be={class:"flex justify-around items-center mt-9"},Fe={class:"flex items-center"},Ee={class:"mb-0 me-1"},Pe=["disabled"],Re={class:"text-primary font-medium"},Ve=s("img",{class:"icon",src:M,alt:"success icon"},null,-1),Ue={__name:"verify",emits:["change-step"],setup(e,{emit:l}){const u=W(),o=J(),t=y(""),h=q(),f=oe(),c=k("phoneToVerify"),d=z(),i=ee({valid:!1,touched:!1});function O(n){i.touched=!1,i.valid=!0,t.value=n}function b(){i.touched=!0,i.valid=!1}const a=y(59),m=y(0);function I(){let n=setInterval(()=>{a.value--,a.value<=0&&(clearTimeout(n),m.value==0)},1e3)}I();const D=y(!1),_=y(null);async function F(){const n=new FormData;n.append("code",t.value),n.append("phone",c.value.phone),n.append("phone_code",c.value.phone_code);let r="";c.value.type=="new"?r="verify_Phone":c.value.type=="reset"&&(r="check_code");try{const w=await $fetch(`${o.public.baseURL}client_web/${r}`,{method:"POST",body:n});c.value.type=="new"?(_.value=w.message,D.value=!0,setTimeout(()=>{D.value=!1,_.value=""},3e3),c.value=null,k("session-token").value=w.data.token,h.push(f("/"))):(h.push(f("/auth/change-password")),k("verify_code",{maxAge:30*60}).value=t.value)}catch(w){d.error(w.response._data.message)}i.touched=!1,i.valid=!0}return G({title:u.t("NAV.login")}),(n,r)=>{const w=H,S=U;return g(),C("div",be,[s("form",{onSubmit:r[1]||(r[1]=te(()=>{},["prevent"])),class:"w-full md:max-w-xl mx-auto xl:mx-0"},[s("h1",we,[s("span",Ce,v(n.$t("HEADERS.verificationCode")),1)]),s("p",Ie,[s("span",De,v(n.$t("HEADERS.enterTheVerification")),1),p(c)?(g(),C("span",Se,v("+"+p(c).phone_code+" "+p(c).phone),1)):B("",!0)]),s("h3",_e,[$e,s("span",null,v(n.$t("HEADERS.editPhoneNumber")),1)]),s("div",Te,[s("div",null,[T(w,{as:"div",onSubmit:F},{default:E(()=>[s("form",null,[s("div",{class:V(["input_wrapper otp_inputs justify-between max-w-[80%] mx-auto",!p(i).valid&&p(i).touched?"error":""])},[T(p(Oe),{ref:"otpInput","input-classes":"otp-input",separator:" ",modelValue:p(t),"onUpdate:modelValue":r[0]||(r[0]=$=>ne(t)?t.value=$:null),"num-inputs":4,"should-auto-focus":!0,"input-type":"letter-numeric",onOnChange:b,onOnComplete:O},null,8,["modelValue"]),ke],2),s("button",{type:"submit",disabled:!p(i).valid,class:"base-btn w-full mt-11"},v(n.$t("BUTTONS.send")),9,Ae)]),s("div",Be,[s("div",Fe,[s("p",Ee,v(n.$t("HEADERS.ifYouDontReceiveCode")),1),s("button",{disabled:p(a)!=0||p(m)!=0,class:"text-primary font-medium"},v(n.$t("BUTTONS.resend")),9,Pe)]),s("span",Re,[s("bdi",null,"00:"+v(p(a)<10?"0":"")+v(p(a)),1)])])]),_:1})])])],32),(g(),j(se,{to:"body"},[R(T(S,null,{default:E(()=>[Ve,s("h4",null,v(n.$t("HEADERS.loggedInSuccessfully")),1)]),_:1},512),[[ae,p(D)]])]))])}}};export{Ue as default};
