import{_ as y}from"./InputPassword.625c3685.js";import{c as V,F as S}from"./vee-validate.esm.a5d21a4f.js";import{_ as $}from"./nuxt-link.d9db1e92.js";import{_ as N,a as T}from"./success.b6063343.js";import{u as A,a as O,b as x}from"./entry.7aaca005.js";import{r as D,a as k,J as _,K as B,L as a,U as l,H as r,Z as p,u as t,a5 as C,R as E,O as R,ad as U,X as H,V as F}from"./swiper-vue.6e12f478.js";import{u as i}from"./cookie.4132d486.js";import{c as I,a as w,b as M}from"./index.esm.83261b9e.js";const q={class:"auth_login"},L={class:"mb-8 w-full"},j={class:"text-5xl capitalize font-bold leading-9"},z={class:"change_form"},J={class:"mb-4"},K={class:"mb-2"},W=["disabled"],X=a("img",{class:"icon",src:N,alt:"success icon"},null,-1),ne={__name:"change-password",setup(Z){const n=A();O({title:n.t("NAV.changePassword")}),V({validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0});const h=x(),s=D({newPassword:null,confirmNewPassword:null}),v=I({newPassword:w().required(),confirmNewPassword:w().required().oneOf([M("newPassword")],n.t("labels.passwordDontMatch")).label(n.t("labels.confirmPasswordIsARequired"))}),c=k(!1);async function b(){const o=i("phoneToVerify"),e=new FormData;e.append("password",s.newPassword),e.append("password_confirmation",s.confirmNewPassword),e.append("phone",o.value.phone),e.append("phone_code",o.value.phone_code),e.append("code",i("verify_code").value);const d=i("phoneToVerify");try{await $fetch(`${h.public.baseURL}${i("user_type").value}_web/reset_password`,{method:"POST",body:e,headers:{Accept:"application/json",lang:n.locale.value,"Accept-Language":n.locale.value}}),d.value=null,c.value=!0,i("verify_code").value=null}catch(u){toast.error(u.response._data.message)}}return(o,e)=>{const d=y,u=S,g=$,P=T;return _(),B("div",q,[a("form",{onSubmit:e[2]||(e[2]=C(()=>{},["prevent"])),class:"w-full md:max-w-xl mx-auto xl:mx-0"},[a("h1",L,[a("span",j,l(o.$t("HEADERS.changePassword")),1)]),a("div",z,[a("div",null,[r(u,{as:"div",onSubmit:b,"validation-schema":t(v)},{default:p(({meta:f})=>[a("form",null,[a("div",J,[r(d,{name:"newPassword",modelValue:t(s).newPassword,"onUpdate:modelValue":e[0]||(e[0]=m=>t(s).newPassword=m)},null,8,["modelValue"])]),a("div",K,[r(d,{placeholder:o.$t("labels.enterTheConfirmationPassword"),name:"confirmNewPassword",modelValue:t(s).confirmNewPassword,"onUpdate:modelValue":e[1]||(e[1]=m=>t(s).confirmNewPassword=m)},null,8,["placeholder","modelValue"])]),a("button",{type:"submit",disabled:!f.valid,class:"base-btn w-full mt-11"},l(o.$t("BUTTONS.change")),9,W)])]),_:1},8,["validation-schema"])])])],32),(_(),E(F,{to:"body"},[R(r(P,null,{default:p(()=>[X,a("h4",null,l(o.$t("HEADERS.passwordChangeSuccessfully")),1),a("p",null,l(o.$t("HEADERS.getHelpToWriteAwillMakeAPowerOfAttorneyPrepareAhealthcare")),1),r(g,{onClick:e[3]||(e[3]=f=>c.value=!1),to:o.localePath("/auth/login"),class:"base-btn w-full mt-8"},{default:p(()=>[H(l(o.$t("BUTTONS.login")),1)]),_:1},8,["to"])]),_:1},512),[[U,t(c)]])]))])}}};export{ne as default};
